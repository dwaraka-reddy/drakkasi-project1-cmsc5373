<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dice Roll Game</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* Only apply blue background to winning message */
      .win-message {
        background-color: #0d6efd;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
      }

      /* User email display */
      .user-email {
        display: inline-block;
        padding: 6px 12px;
        background-color: #6c757d;
        color: white;
        border-radius: 4px;
        margin-left: auto;
      }

      /* Plain navigation buttons */
      .nav-btn {
        text-decoration: none;
        background-color: transparent;
        color: #0d6efd;
        padding: 6px 12px;
        border: 1px solid #0d6efd;
        border-radius: 4px;
        margin-right: 5px;
        display: inline-block;
      }

      .nav-btn:hover {
        background-color: #f8f9fa;
      }

      .nav-btn-danger {
        color: #dc3545;
        border-color: #dc3545;
      }

      .nav-btn-danger:hover {
        background-color: #f8d7da;
      }

      /* Login alignment */
      .login-container {
        max-width: 400px;
        margin: 50px auto;
        text-align: left;
        position: relative;
      }

      .login-form {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 5px;
      }

      .user-display {
        position: absolute;
        right: 10px;
        top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid bg-primary text-white py-3 mb-3">
      <div class="container">
        <h1 id="appHeader" class="text-center">Dice Roll Game</h1>
      </div>
    </div>

    <div class="container">
      <!-- Navigation Menu - hidden until logged in -->
      <div id="navMenuContainer" class="d-none mb-3">
        <div class="d-flex align-items-center">
          <a href="#" id="homeLink" class="nav-btn" data-path="/">Home</a>
          <a href="#" id="profileLink" class="nav-btn" data-path="/profile"
            >Play History</a
          >
          <button id="logoutButton" class="nav-btn nav-btn-danger">
            Sign Out
          </button>
          <span id="userEmailDisplay" class="user-email ms-auto"></span>
        </div>
      </div>

      <!-- Login Form - shown if not logged in -->
      <div id="loginDiv" class="d-block">
        <div class="login-container text-start">
          <div class="login-form">
            <h4 class="text-center mb-4">Sign in, please!</h4>
            <form name="loginForm">
              <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  name="password"
                  required
                />
              </div>
              <div class="d-flex align-items-center">
                <button type="submit" class="btn btn-danger">Submit</button>
                <button
                  id="noUserBtn"
                  type="button"
                  class="btn btn-secondary ms-auto"
                >
                  No User
                </button>
              </div>
            </form>
            <div class="mt-3">
              <a href="#" id="goToCreateAccount">Create a new account</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Create Account Form - hidden by default -->
      <div id="createAccountDiv" class="d-none">
        <div class="login-container">
          <div class="login-form">
            <h4 class="text-center mb-4">Create a new account</h4>
            <form name="createAccountForm">
              <div class="mb-3">
                <label for="createEmail" class="form-label"
                  >Email address</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="createEmail"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="emailConfirm" class="form-label"
                  >Confirm Email</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="emailConfirm"
                  name="emailConfirm"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="createPassword" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="createPassword"
                  name="password"
                  required
                />
              </div>
              <div>
                <button type="submit" class="btn btn-primary">
                  Create Account
                </button>
              </div>
            </form>
            <div class="mt-3">
              <a href="#" id="goToLogin">Back to login</a>
            </div>
          </div>
        </div>
      </div>

      <!-- SPA Root - Content will be injected here -->
      <div id="spaRoot" class="d-none">
        <!-- View content will be loaded here by Router -->
      </div>

      <!-- Guest SPA Root - For playing without login -->
      <div id="guestSpaRoot" class="d-none">
        <!-- Guest mode content will be loaded here -->
      </div>
    </div>

    <!-- Loading Spinner -->
    <div
      id="spinnerOverlay"
      class="position-fixed top-0 start-0 w-100 h-100 d-none"
      style="background-color: rgba(0, 0, 0, 0.5); z-index: 9999"
    >
      <div class="d-flex justify-content-center align-items-center h-100">
        <div
          class="spinner-border text-light"
          role="status"
          style="width: 3rem; height: 3rem"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="controller/app.js"></script>
  </body>
</html>
